(function(){var m=[].slice;var f={Deferrals:function(){function a(b){this.continuation=b;this.count=1;this.ret=null}a.prototype._fulfill=function(){if(!--this.count)return this.continuation(this.ret)};a.prototype.defer=function(b){++this.count;return function(c){return function(){var a;var d=1<=arguments.length?m.call(arguments,0):[];null!=b&&null!=(a=b.assign_fn)&&a.apply(null,d);return c._fulfill()}}(this)};return a}(),findDeferral:function(){return null},trampoline:function(a){return a()}};var n=
function(){};var g=g=function(){function a(b){b=b||{};this.lazy_loop_delay=b.lazy_loop_delay||30;this.loop_delay=b.loop_delay||5;this.work_min=b.work_min||1;this.auto_stop_bits=b.auto_stop_bits||4096;this.max_bits_per_delta=b.max_bits_per_delta||4;this.auto_stop=b.auto_stop?b.auto_stop:!0;this.entropies=[];this.running=!0;this.is_generating=!1;this.timer_race_loop()}a.prototype.generate=function(b,c){var a,d;f.findDeferral(arguments);this.is_generating=!0;this.running||this.resume();var e=0;var l=
[];(function(c){return function(h){var k=function(h){var g=function(){return f.trampoline(function(){return k(h)})};if(e<b)(function(b){if(c.entropies.length)return a=c.entropies.splice(0,1)[0],e+=a[1],b(l.push(a[0]));d=new f.Deferrals(b);c.delay(d.defer({}));d._fulfill()})(g);else return h()};k(h)}})(this)(function(b){return function(){b.auto_stop&&b.stop();b.is_generating=!1;return c(l)}}(this))};a.prototype.stop=function(){return this.running=!1};a.prototype.resume=function(){this.running=!0;return this.timer_race_loop()};
a.prototype.reset=function(){this.entropies=[];return this.total_bits=0};a.prototype.count_unused_bits=function(){var b;var c=0;var a=this.entropies;var d=0;for(b=a.length;d<b;d++){var e=a[d];c+=e[1]}return c};a.prototype.delay=function(b){var c;f.findDeferral(arguments);var a=this.is_generating?this.loop_delay:this.lazy_loop_delay;(function(b){return function(b){c=new f.Deferrals(b);setTimeout(c.defer({}),a);c._fulfill()}})(this)(function(a){return function(){return b()}}(this))};a.prototype.timer_race_loop=
function(){f.findDeferral(arguments);this._last_count=null;var b=function(a){var c,d,e,g,k;return function(h){var l=function(){return f.trampoline(function(){return b(h)})};if(a.running)a.count_unused_bits()<a.auto_stop_bits&&(c=a.millisecond_count(),null!=a._last_count&&(d=c-a._last_count)&&(e=Math.floor(a.log_2(Math.abs(d))),e=Math.min(a.max_bits_per_delta,e),g=[d,e],a.entropies.push(g)),a._last_count=c),k=new f.Deferrals(l),a.delay(k.defer({})),k._fulfill();else return h()}}(this);b(n)};a.prototype.log_2=
function(a){return Math.log(a)/Math.LN2};a.prototype.millisecond_count=function(){var a;var c=Date.now();for(a=0;Date.now()<c+this.work_min+1;)a++;return a};return a}();"undefined"!==typeof window&&null!==window&&(window.Generator=g);"undefined"!==typeof exports&&null!==exports&&(exports.Generator=g)}).call(this);
